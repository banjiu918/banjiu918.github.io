import{f as E,i as at,g as et,h as nt,j as ot,r as st,k as rt,l as L,m as it,_ as ct,n as lt,P as ut,q as C,s as mt,v as dt,S as pt,T as ft,x as ht,L as yt,y as v,z as U,u as w,A,B as tt,C as gt,o as wt}from"./CVS34lBf.js";import{u as P}from"./BoB8qhpD.js";import{q as $}from"./DrSMcaZk.js";import{u as vt}from"./D56fHZDZ.js";import"./Brdv-XDx.js";const _t=E({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(m,t){const a=await L[m.name]().then(n=>n.default||n);return()=>C(a,m.layoutProps,t.slots)}}),bt=E({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(m,t){const a=lt(),n=at(ut),l=n===et()?nt():n,i=ot(()=>{let d=v(m.name)??l.meta.layout??"default";return d&&!(d in L)&&m.fallback&&(d=v(m.fallback)),d}),_=st();t.expose({layoutRef:_});const b=a.deferHydration();if(a.isHydrating){const d=a.hooks.hookOnce("app:error",b);rt().beforeEach(d)}return()=>{const d=i.value&&i.value in L,e=l.meta.layoutTransition??it;return ct(ft,d&&e,{default:()=>C(pt,{suspensible:!0,onResolve:()=>{dt(b)}},{default:()=>C(At,{layoutProps:mt(t.attrs,{ref:_}),key:i.value||void 0,name:i.value,shouldProvide:!m.name,hasTransition:!!e},t.slots)})}).default()}}}),At=E({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(m,t){const a=m.name;return m.shouldProvide&&ht(yt,{isCurrent:n=>a===(n.meta.layout??"default")}),()=>{var n,l;return!a||typeof a=="string"&&!(a in L)?(l=(n=t.slots).default)==null?void 0:l.call(n):C(_t,{key:a,layoutProps:m.layoutProps,name:a},t.slots)}}}),$t=m=>{let t=!1;const a=document.getElementById(m);a&&a.querySelectorAll("p").forEach(n=>{var _,b;const l=(_=n.textContent)==null?void 0:_.match(/^https:\/\/www\.youtube\.com\/watch\?(v=[0-9a-zA-Z_]*)$/);l&&l.forEach(d=>{const e=d.match(/v=(.*)$/);if(e){const y=e[1],u=document.createElement("div");u.setAttribute("class","flex justify-center items-center ");const p=document.createElement("iframe");p.setAttribute("src",`https://www.youtube-nocookie.com/embed/${y}`),p.setAttribute("frameborder","0"),p.setAttribute("allowfullscreen","allowfullscreen"),p.setAttribute("width","560"),p.setAttribute("height","315"),n.innerHTML="",u.appendChild(p),n.appendChild(u)}});const i=(b=n.textContent)==null?void 0:b.match(/^https:\/\/twitter\.com\/[0-9a-zA-Z_]*\/status\/([0-9a-zA-Z]*)$/);i&&i.forEach(d=>{const e=d,y=document.createElement("div");y.setAttribute("class","flex justify-center items-center");const u=document.createElement("blockquote");u.setAttribute("class","twitter-tweet");const p=document.createElement("a");if(p.setAttribute("href",`https://twitter.com/x/status/${e}`),n.innerHTML="",u.appendChild(p),y.appendChild(u),n.appendChild(y),!t){const h=document.createElement("script");h.setAttribute("src","https://platform.twitter.com/widgets.js"),h.setAttribute("charset","utf-8"),h.setAttribute("async","async"),h.setAttribute("defer","defer"),document.body.appendChild(h),t=!0}})})},Tt=E({__name:"[...slug]",async setup(m){var T,S,B,j,q,O,H,I,N,M,R,z,D,V,Y,Z,Q,G,K,W,X,F;let t,a;const n=et(),l=U(),i=n.params.slug,_=i[0]==="categories",b=i[0]==="tags",d=i[0]==="archives";let e=null,y=null,u=1,p=1,h=`themes-${l.theme}-default`,x="",k="";const g=((T=l.pagination)==null?void 0:T.per_page)||10;if(_){x=i[1];const f="Category: "+x,o=f;w({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:f},{name:"og:description",content:o},{name:"twitter:title",content:f},{name:"twitter:description",content:o}]}),u=Number.parseInt(i[3])||1;const c={categories:{$in:x},hidden:{$ne:!0},listed:{$ne:!1}},s=([t,a]=A(async()=>P(n.path,async()=>{let r=$("").where(c).sort({date:-1});return g!=-1&&(r=r.limit(g).skip((u-1)*g)),await r.find()},"$QEPqqgzh0P")),t=await t,a(),t);p=([t,a]=A(()=>$("").where(c).count()),t=await t,a(),t),y=s.data,h=`themes-${l.theme}-category`}else if(d){const f="Archives",o="Archives";w({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:f},{name:"og:description",content:o},{name:"twitter:title",content:f},{name:"twitter:description",content:o}]}),u=Number.parseInt(i[2])||1;const c={hidden:{$ne:!0},listed:{$ne:!1}},s=([t,a]=A(async()=>P(n.path,async()=>{let r=$("").where(c).sort({date:-1});return g!=-1&&(r=r.limit(g).skip((u-1)*g)),await r.find()},"$VsTxVbyvBn")),t=await t,a(),t);p=([t,a]=A(()=>$("").where(c).count()),t=await t,a(),t),y=s.data,h=`themes-${l.theme}-archive`}else if(b){k=i[1];const f="Tag: "+k,o=f;w({title:"Archives",meta:[{name:"description",content:o},{name:"og:title",content:f},{name:"og:description",content:o},{name:"twitter:title",content:f},{name:"twitter:description",content:o}]}),u=Number.parseInt(i[2])||1;const c={tags:{$in:k},hidden:{$ne:!0},listed:{$ne:!1}},s=([t,a]=A(async()=>P(n.path,async()=>{let r=$("").where(c).sort({date:-1});return g!=-1&&(r=r.limit(g).skip((u-1)*g)),await r.find()},"$ujGeyE5lXp")),t=await t,a(),t);p=([t,a]=A(()=>$("").where(c).count()),t=await t,a(),t),y=s.data,h=`themes-${l.theme}-tag`}else{if(e=([t,a]=A(async()=>P(n.path,async()=>await $("").where({_path:n.path}).findOne(),"$KLPeBpw9YA")),t=await t,a(),t).data,(S=e.value)!=null&&S.layout){const s=e.value.layout;s.startsWith("themes")?h=s:h=`themes-${l.theme}-${s}`}if((B=e.value)!=null&&B.redirect_to_domain){const s=((j=e.value)==null?void 0:j.redirect_to_domain)+((q=e.value)==null?void 0:q._path);w({script:[{innerHTML:`window.location = "${s||"/"}"`}]})}if((O=e.value)!=null&&O.redirect_to_full_url){const s=(H=e.value)==null?void 0:H.redirect_to_full_url;w({script:[{innerHTML:`window.location = "${s||"/"}"`}]})}e.value&&vt(e.value);const o=U().url.replace(/\/$/,""),c=o+((I=e.value)==null?void 0:I._path);if(w({meta:[{key:"og:type",name:"og:type",content:"article"},{key:"og:url",name:"og:url",content:c},{name:"twitter:text:title",content:(N=e.value)==null?void 0:N.title},{name:"twitter:card",content:"summary"},{name:"article:article:tag",content:(M=e.value)!=null&&M.tags?(R=e.value.tags)==null?void 0:R.toString():""}],link:[{rel:"canonical",href:c}]}),(z=e.value)!=null&&z.alternates){const s=((V=(D=e.value)==null?void 0:D.alternates)==null?void 0:V.map(r=>{const J=Object.keys(r)[0];return{rel:"alternate",href:r[J],hreflang:J}}))||[];s.push({rel:"alternate",href:c,hreflang:((Y=e.value)==null?void 0:Y.language)||"en"}),w({link:s})}(Z=e.value)!=null&&Z.cover&&w({meta:[{key:"og:image",name:"og:image",content:o+"/images/"+((Q=e.value)==null?void 0:Q.cover)},{name:"og:image:alt",content:(G=e.value)==null?void 0:G.title},{name:"twitter:image",content:o+"/images/"+((K=e.value)==null?void 0:K.cover)}]}),(W=e.value)!=null&&W.date&&w({meta:[{name:"article:published_time",content:new Date((X=e.value)==null?void 0:X.date).toISOString()},{name:"article:article:modified_time",content:new Date((F=e.value)==null?void 0:F.date).toISOString()}]})}return tt(()=>{$t("nuxtContent")}),tt(()=>{document.querySelectorAll(".prose img").forEach(o=>{var r;const c=o.alt,s=document.createElement("div");s.textContent=c,s.classList.add("text-sm","text-center","text-gray-600","mt-1"),(r=o.parentNode)==null||r.insertBefore(s,o.nextSibling)})}),(f,o)=>{const c=bt;return wt(),gt(c,{name:v(h),doc:v(e),docs:v(y),"current-page":v(u),total:v(p),category:v(x),tag:v(k)},null,8,["name","doc","docs","current-page","total","category","tag"])}}});export{Tt as default};
